---
title: "Project"
format: 
  html: 
    code-fold: true
    code-summary: "Show the code"
    code-copy: true
    embed-resources: true
  pdf:
    colorlinks: true
    papersize: a4
    fontsize: 11pt
    margin-left: 2cm
    margin-right: 2cm
    margin-top: 2cm
    margin-bottom: 2cm
---

Welcome to my project page.

Keep an eye on this space to stay updated with my project activities.

# 1. Project Overview and Scope ğŸ”

Istanbul is not only Turkey's but also Europe's most populous city. Therefore, if a disaster such as an earthquake occurs, the potential of destruction and the need for help would be very high. Due to the earthquake disaster that occurred at the beginning of 2023, the risky condition of buildings and residences in Turkey has become a matter of concern for people.

The purpose of this project is to examine Istanbul, which is almost certain to face a possible earthquake and significant destruction. The aim of the project is not only to assess buildings and residences in terms of their risky structural condition and make district-based interpretations but also to evaluate the opinions of people living in Istanbul and compare all the results.

7 datasets were used for this purpose, various graphs were drawn and interpreted comprehensively to make inferences.

# 2. Data ğŸ“„

## 2.1 Data Source

-   [Deprem Senaryosu Analiz SonuÃ§larÄ±](https://data.ibb.gov.tr/dataset/deprem-senaryosu-analiz-sonuclari/resource/9c3ac492-de4b-4245-b418-7ad3df67a193)

-   [2017 YÄ±lÄ± Mahalle BazlÄ± Bina SayÄ±larÄ±](https://data.ibb.gov.tr/dataset/mahalle-bazli-bina-analiz-verisi/resource/cef193d5-0bd2-4e8d-8a69-275c50288875)

-   [VDYM Ä°lÃ§e BazÄ±nda Hanelerdeki Riskli YapÄ± Durumu Bireysel Ã–ngÃ¶rÃ¼leri](https://data.ibb.gov.tr/dataset/vdym-ilce-bazinda-hanelerdeki-riskli-yapi-durumu-bireysel-ongoruleri/resource/52fe7088-62f2-4480-8f27-788dee385c9b)

-   [VDYM Ä°lÃ§e BazÄ±nda Hanelerdeki Kentsel DÃ¶nÃ¼ÅŸÃ¼m Fikri Bireysel Ã–ngÃ¶rÃ¼leri](https://data.ibb.gov.tr/dataset/vdym-ilce-bazinda-hanelerdeki-kentsel-donusum-fikri-bireysel-ongoruleri/resource/2683ee8b-9bc3-45cf-a115-49b285851317)

-   [Ä°lÃ§e BazlÄ± Ortalama Hane HalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼](https://data.ibb.gov.tr/dataset/ilce-bazli-ortalama-hane-halki-buyuklugu/resource/da747beb-df41-474e-aa8a-93d983e69b15)

-   [2019 YÄ±lÄ± Belediye NÃ¼fuslarÄ±](https://data.ibb.gov.tr/dataset/belediye-nufuslari-veri-seti/resource/c6c9b289-2824-41b3-ab3d-4fd655ed4e24)

-   [Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremler](https://data.ibb.gov.tr/dataset/istanbul-da-son-bir-yilda-gerceklesen-depremler/resource/32904f60-8091-4dc3-b527-351dca6c1c22)

Information and explanations about these datasets are included in the section [2.2 General Information About Data].

All this data was taken from [IÌ‡stanbul BuÌˆyuÌˆksÌ§ehir Belediyesi AcÌ§Ä±k Veri PortalÄ±](https://data.ibb.gov.tr/dataset) and [TÃœÄ°K Merkezi DaÄŸÄ±tÄ±m Sistemi](https://biruni.tuik.gov.tr/medas/).

```{r}
#install.packages("readxl")
library(readxl)

dosya_yolu<-"/Users/aycacetin/Documents/GitHub/emu660-spring2024-aycacetin/assets/deprem.xlsx"

deprem_senaryo<-read_excel(dosya_yolu, sheet=1)
bina_sayi<-read_excel(dosya_yolu, sheet=2)
riskli_yapi_durumu<-read_excel(dosya_yolu, sheet=3)
kentsel_donusum_fikri<-read_excel(dosya_yolu, sheet=4)
ort_hane<-read_excel(dosya_yolu, sheet=7)
belediye_nufus<-read_excel(dosya_yolu, sheet=8)
gerceklesen_deprem<-read_excel(dosya_yolu, sheet=9)

save(deprem_senaryo, file="deprem_senaryo.RData")
save(bina_sayi, file="bina_sayi.RData")
save(riskli_yapi_durumu, file="riskli_yapi_durumu.RData")
save(kentsel_donusum_fikri, file="kentsel_donusum_fikri.RData")
save(ort_hane, file="ort_hane.RData")
save(belediye_nufus, file="belediye_nufus.RData")
save(gerceklesen_deprem, file="gerceklesen_deprem.RData")

str(deprem_senaryo)
str(bina_sayi)
str(riskli_yapi_durumu)
str(kentsel_donusum_fikri)
str(ort_hane)
str(belediye_nufus)
str(gerceklesen_deprem)
```

## 2.2 General Information About Data

[Deprem Senaryosu Analiz SonuÃ§larÄ±](https://data.ibb.gov.tr/dataset/deprem-senaryosu-analiz-sonuclari/resource/9c3ac492-de4b-4245-b418-7ad3df67a193) is a dataset containing the results of an analysis made on an earthquake scenario that is predicted to have a magnitude of 7.5. Each row represents a neighbourhood. The columns have information mainly about the number of buildings based on damage level, the number of people based on vital status and pipe damages.

[2017 YÄ±lÄ± Mahalle BazlÄ± Bina SayÄ±larÄ±](https://data.ibb.gov.tr/dataset/mahalle-bazli-bina-analiz-verisi/resource/cef193d5-0bd2-4e8d-8a69-275c50288875) is a dataset about the buildings. Each row represents a neighbourhood. The columns have information mainly about year of construction and number of floors of the buildings.

[VDYM Ä°lÃ§e BazÄ±nda Hanelerdeki Riskli YapÄ± Durumu Bireysel Ã–ngÃ¶rÃ¼leri](https://data.ibb.gov.tr/dataset/vdym-ilce-bazinda-hanelerdeki-riskli-yapi-durumu-bireysel-ongoruleri/resource/52fe7088-62f2-4480-8f27-788dee385c9b) is a dataset about the opinions of households about the risky building situation on a district basis.

[VDYM Ä°lÃ§e BazÄ±nda Hanelerdeki Kentsel DÃ¶nÃ¼ÅŸÃ¼m Fikri Bireysel Ã–ngÃ¶rÃ¼leri](https://data.ibb.gov.tr/dataset/vdym-ilce-bazinda-hanelerdeki-kentsel-donusum-fikri-bireysel-ongoruleri/resource/2683ee8b-9bc3-45cf-a115-49b285851317) is a dataset about the opinions of households about the idea of urban transformation on a district basis.

[Ä°lÃ§e BazlÄ± Ortalama Hane HalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼](https://data.ibb.gov.tr/dataset/ilce-bazli-ortalama-hane-halki-buyuklugu/resource/da747beb-df41-474e-aa8a-93d983e69b15) is a dataset about the average household size on a district basis.

[2019 YÄ±lÄ± Belediye NÃ¼fuslarÄ±](https://data.ibb.gov.tr/dataset/belediye-nufuslari-veri-seti/resource/c6c9b289-2824-41b3-ab3d-4fd655ed4e24) is a dataset about the population within the borders of each municipality.

[Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremler](https://data.ibb.gov.tr/dataset/istanbul-da-son-bir-yilda-gerceklesen-depremler/resource/32904f60-8091-4dc3-b527-351dca6c1c22) is a dataset about the earthquakes around Istanbul within 1 year. Each row represents an earthquake. In the columns, there are details about the earthquakes.

## 2.3 Reason of Choice

Istanbul is a city where the risk of earthquake is said to be very high, and it is predicted to cause significant loss of life and property. Almost every day, warnings from experts about the earthquake, which is estimated to be between 7.2 and 7.6 in magnitude, can be seen in news and newspapers. I decided to work on such a current topic, to inform people through comprehensive analysis, to make them more aware, and to encourage taking steps against this disaster to get through with minimal damage.

## 2.4 Preprocessing

There are 7 datasets in ".csv", ".xls" and ".xlsx" formats which were downloaded from the sources mentioned in the section [2.1 Data Source]. All these datasets have been merged into the same Excel file called "deprem.xlsx" and organized for a better use in the analysis. Each dataset is placed on a different sheet. After that, spelling errors on each dataset were corrected via Excel. In other words, correction of wrong letters was done. Finally, the "deprem.xlsx" file was read and stored in [.RData](https://github.com/emu-hacettepe-analytics/emu660-spring2024-aycacetin/tree/main) format using the code in the section [2.1 Data Source]. The [.RData](https://github.com/emu-hacettepe-analytics/emu660-spring2024-aycacetin/tree/main) file can be downloaded to review.

# 3. Analysis ğŸ–¥ï¸

## 3.1 Exploratory Data Analysis

### Analysis of the Datasets

```{r}
#install.packages("ggplot2")
library(ggplot2)
library(dplyr)
library(tidyverse)
```

**"deprem_senaryo" analysis:**

The analysis began with the "deprem_senaryo" dataset. Initially, plots were created using data about the number of damaged buildings, the number of injured people and the number of pipeline damages. And then, the need for temporary shelter was assesed.

Although the data is based on neighborhoods, the analyses have been done based on districts.

"ilÃ§e bazÄ±nda hasarlÄ± bina sayÄ±larÄ±" (4 types of damage):

-   BakÄ±rkÃ¶y, Fatih and KÃ¼Ã§Ã¼kÃ§ekmece on the "Ã‡ok AÄŸÄ±r HasarlÄ± Binalar" plot,

-   AvÄ±clar and BakÄ±rkÃ¶y on the "AÄŸÄ±r HasarlÄ± Binalar" plot,

-   AvcÄ±lar on the "Orta HasarlÄ± Binalar" and "Hafif HasarlÄ± Binalar" plot were attention-grabbing.

```{r}
p1<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=cok_agir_hasarli_bina_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Ã‡ok AÄŸÄ±r HasarlÄ± Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Ã‡ok AÄŸÄ±r HasarlÄ± Bina SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p1
p2<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=agir_hasarli_bina_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("AÄŸÄ±r HasarlÄ± Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda AÄŸÄ±r HasarlÄ± Bina SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p2
p3<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=orta_hasarli_bina_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Orta HasarlÄ± Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Orta HasarlÄ± Bina SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p3
p4<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=hafif_hasarli_bina_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Hafif HasarlÄ± Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Hafif HasarlÄ± Bina SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p4
```

"kiÅŸi sayÄ±larÄ±" (4 types):

-   BahÃ§elievler and BakÄ±rkÃ¶y on the "Can KaybÄ±" plot,

-   BahÃ§elievler, BakÄ±rkÃ¶y, Fatih and KÃ¼Ã§Ã¼kÃ§ekmece on the "AÄŸÄ±r YaralÄ±" plot,

-   BahÃ§elievler, BakÄ±rkÃ¶y and KÃ¼Ã§Ã¼kÃ§ekmece on the "Hastanede Tedavi" and "Hafif YaralÄ±" plot were attention-grabbing.

```{r}
p5<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=can_kaybi_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Can KaybÄ± SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Can KaybÄ± SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p5
p6<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=agir_yarali_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("AÄŸÄ±r YaralÄ± SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda AÄŸÄ±r YaralÄ± SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p6
p7<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=hastanede_tedavi_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Hastanede Tedavi SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Hastanede Tedavi SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p7
p8<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=hafif_yarali_sayisi))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Hafif YaralÄ± SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Hafif YaralÄ± SayÄ±sÄ± DaÄŸÄ±lÄ±mÄ±")
p8
```

"boru hasarÄ±" (3 types of damage):

-   AvcÄ±lar and BeylikdÃ¼zÃ¼ on the "DoÄŸalgaz Boru HasarÄ±" plot,

-   BeylikdÃ¼zÃ¼ on the "Ä°Ã§me Suyu Boru HasarÄ±" plot,

-   AvcÄ±lar, BakÄ±rkÃ¶y, BeylikdÃ¼zÃ¼ and Tuzla on the "AtÄ±k Su Boru HasarÄ±" plot were attention-grabbing.

```{r}
p9<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=dogalgaz_boru_hasari))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("DoÄŸalgaz Boru HasarÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda DoÄŸalgaz Boru HasarÄ± DaÄŸÄ±lÄ±mÄ±")
p9
p10<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=icme_suyu_boru_hasari))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Ä°Ã§me Suyu Boru HasarÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Ä°Ã§me Suyu Boru HasarÄ± DaÄŸÄ±lÄ±mÄ±")
p10
p11<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=atik_su_boru_hasari))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("AtÄ±k Su Boru HasarÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda AtÄ±k Su Boru HasarÄ± DaÄŸÄ±lÄ±mÄ±")
p11
```

"geÃ§ici barÄ±nma":

-   AvcÄ±lar, BahÃ§elievler, BeylikdÃ¼zÃ¼, KÃ¼Ã§Ã¼kÃ§ekmece and Zeytinburnu on the "AtÄ±k Su Boru HasarÄ±" plot were attention-grabbing.

```{r}
p12<-deprem_senaryo%>%ggplot(aes(x=ilce_adi, y=gecici_barinma))+
  geom_point()+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("GeÃ§ici BarÄ±nma")+
  labs(title="Ä°lÃ§e BazÄ±nda GeÃ§ici BarÄ±nma DaÄŸÄ±lÄ±mÄ±")
p12
```

**"bina_sayi" analysis:**

The analysis continued with the "bina_sayi" dataset, evaluating buildings based on their construction year and number of floors.

Although the data is based on neighborhoods, the analyses have been done based on districts.

"ilÃ§e bazÄ±nda yÄ±llara gÃ¶re bina sayÄ±larÄ±nÄ±n oranlarÄ±":

It has been observed that the majority of the buildings were constructed between 1980 and 2000.

```{r}
once<-sum(bina_sayi$`1980_oncesi`)
ara<-sum(bina_sayi$`1980-2000_arasi`)
sonra<-sum(bina_sayi$`2000_sonrasi`)
oranlar1<-c(once=once/(once+ara+sonra), 
           ara=ara/(once+ara+sonra), 
           sonra=sonra/(once+ara+sonra))
print(oranlar1)
```

"ilÃ§e bazÄ±nda yÄ±llara gÃ¶re bina sayÄ±larÄ±":

-   BeyoÄŸlu, Fatih and KadÄ±kÃ¶y on the "YÄ±llara GÃ¶re Bina SayÄ±larÄ±" plot were attention-grabbing.

```{r}
p13<-ggplot(bina_sayi, aes(x=ilce_adi))+
  geom_col(aes(y=`1980_oncesi`, fill="1980 Ã–ncesi"), position=position_dodge(width=0.9))+
  geom_col(aes(y=`1980-2000_arasi`, fill="1980-2000 ArasÄ±"), position=position_dodge(width=0.9))+
  geom_col(aes(y=`2000_sonrasi`, fill="2000 SonrasÄ±"), position=position_dodge(width=0.9))+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e")+
  ylab("Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda YÄ±llara GÃ¶re Bina SayÄ±larÄ±")
p13
```

"ilÃ§e bazÄ±nda kat sayÄ±sÄ±na gÃ¶re bina sayÄ±larÄ±nÄ±n oranlarÄ±":

It has been observed that the majority of the buildings are 1-4 stories tall.

```{r}
alcak<-sum(bina_sayi$`1-4 kat_arasi`)
orta<-sum(bina_sayi$`5-9 kat_arasi`)
yuksek<-sum(bina_sayi$`9-19 kat_arasi`)
oranlar2<-c(alcak=alcak/(alcak+orta+yuksek), 
           orta=orta/(alcak+orta+yuksek), 
           yuksek=yuksek/(alcak+orta+yuksek))
print(oranlar2)
```

"ilÃ§e bazÄ±nda kat sayÄ±sÄ±na gÃ¶re bina sayÄ±larÄ±":

```{r}
p14<-ggplot(bina_sayi, aes(x=ilce_adi))+
  geom_col(aes(y=`1-4 kat_arasi`, fill="1-4 kat_arasi"), position=position_dodge(width=0.9))+
  geom_col(aes(y=`5-9 kat_arasi`, fill="5-9 kat_arasi"), position=position_dodge(width=0.9))+
  geom_col(aes(y=`9-19 kat_arasi`, fill="9-19 kat_arasi"), position=position_dodge(width=0.9))+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e")+
  ylab("Bina SayÄ±sÄ±")+
  labs(title="Ä°lÃ§e BazÄ±nda Kat SayÄ±sÄ±na GÃ¶re Bina SayÄ±larÄ±")
p14
```

**"riskli_yapi_durumu" analysis:**

An analysis of individual perceptions regarding the structural risk of their households have been conducted.

"Ä°lÃ§e bazÄ±nda hanelerdeki riskli yapÄ± durumu hakkÄ±ndaki bireysel Ã¶ngÃ¶rÃ¼lerin oranlarÄ±" (3 types of individual foresights):

It has been observed that a significant number of people answered "yes" or "I don't know.".

```{r}
evet<-sum(riskli_yapi_durumu$riskli_yapi_evet)
hayir<-sum(riskli_yapi_durumu$riskli_yapi_hayir)
bilmiyorum<-sum(riskli_yapi_durumu$riskli_yapi_bilmiyorum)
oranlar3<-c(riskli_yapi_evet=evet/(evet+hayir+bilmiyorum), 
           riskli_yapi_hayir=hayir/(evet+hayir+bilmiyorum), 
           riskli_yapi_bilmiyorum=bilmiyorum/(evet+hayir+bilmiyorum))
print(oranlar3)
```

"Ä°lÃ§e bazÄ±nda hanelerdeki riskli yapÄ± durumu hakkÄ±ndaki bireysel Ã¶ngÃ¶rÃ¼lerin daÄŸÄ±lÄ±mÄ±" (3 types of individual foresights):

In some districts, the green segments representing those who believe they live in risky structures are particularly noticeable.

```{r}
#veri Ã§erÃ§evesini uzun formata dÃ¶nÃ¼ÅŸtÃ¼rme
library(tidyr)
riskli_yapi_durumu_duzenlenmis<-pivot_longer(riskli_yapi_durumu, cols=starts_with("riskli_yapi_"), names_to="ongoru", values_to="deger")

p15<-ggplot(riskli_yapi_durumu_duzenlenmis, aes(x=ilce, y=deger, fill=ongoru))+
  geom_bar(stat="identity", position="stack")+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e") +
  ylab("Ã–ngÃ¶rÃ¼ SayÄ±sÄ±") +
  labs(title="Ä°lÃ§e BazÄ±nda Hanelerdeki Riskli YapÄ± Durumu HakkÄ±ndaki Bireysel Ã–ngÃ¶rÃ¼ler")
p15
```

**"kentsel_donusum_fikri" analysis:**

An analysis of individual perceptions regarding the idea of urban transformation of their households have been conducted.

"Ä°lÃ§e bazÄ±nda hanelerdeki kentsel dÃ¶nÃ¼ÅŸÃ¼m fikri hakkÄ±ndaki bireysel Ã¶ngÃ¶rÃ¼lerin oranlarÄ±" (2 types of individual foresights):

It has been observed that there is a significant number of people who consider urban transformation necessary and cannot be underestimated.

```{r}
evet<-sum(kentsel_donusum_fikri$kentsel_donusum_ihtiyac_evet)
hayir<-sum(kentsel_donusum_fikri$kentsel_donusum_ihtiyac_hayir)
oranlar4<-c(kentsel_donusum_ihtiyac_evet=evet/(evet+hayir), 
           kentsel_donusum_ihtiyac_hayir=hayir/(evet+hayir))
print(oranlar4)
```

"Ä°lÃ§e bazÄ±nda hanelerdeki kentsel dÃ¶nÃ¼ÅŸÃ¼m fikri hakkÄ±ndaki bireysel Ã¶ngÃ¶rÃ¼lerin daÄŸÄ±lÄ±mÄ±" (2 types of individual foresights):

In some districts, the red segments representing those who believe in the need of urban transformation are particularly noticeable.

```{r}
#veri Ã§erÃ§evesini uzun formata dÃ¶nÃ¼ÅŸtÃ¼rme
library(tidyr)
kentsel_donusum_fikri_duzenlenmis<-pivot_longer(kentsel_donusum_fikri, cols=starts_with("kentsel_donusum_ihtiyac_"), names_to="ongoru", values_to="deger")

p16<-ggplot(kentsel_donusum_fikri_duzenlenmis, aes(x=ilce, y=deger, fill=ongoru))+
  geom_bar(stat="identity", position="stack")+
  theme(axis.text.x=element_text(angle=90, hjust=1))+
  xlab("Ä°lÃ§e") +
  ylab("Ã–ngÃ¶rÃ¼ SayÄ±sÄ±") +
  labs(title="Ä°lÃ§e BazÄ±nda Hanelerdeki Kentsel DÃ¶nÃ¼ÅŸÃ¼m Fikri HakkÄ±ndaki Bireysel Ã–ngÃ¶rÃ¼ler")
p16
```

**"ort_hane" analysis:**

"Ä°lÃ§e BazlÄ± Ortalama HanehalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼":

In the analysis of the "ort_hane" dataset, districts have been ranked from highest to lowest average household size and it has been observed that the most crowded households are in Sultanbeyli.

```{r}
#ortalama hanehalkÄ± bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne gÃ¶re bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸe sÄ±ralama
ort_hane2<-ort_hane%>%mutate(ilce=fct_reorder(ilce, ortalama_hanehalki_buyuklugu, .desc=TRUE))

p17<-ggplot(ort_hane2, aes(x=ilce, y=ortalama_hanehalki_buyuklugu))+
  geom_bar(stat="identity")+
  theme(axis.text.x=element_text(angle=45, hjust=1))+
  xlab("Ä°lÃ§e AdÄ±")+
  ylab("Ortalama HanehalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼")+
  labs(title="Ä°lÃ§e BazÄ±nda Ortalama HanehalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼")
p17
```

We can see from the graph that in more than half of the districts in Ä°stanbul, the average household size is more than 3.

**"belediye_nufus" analysis:**

"2019 YÄ±lÄ± Belediye NÃ¼fuslarÄ±" GrafiÄŸi:

In the analysis of the "belediye_nufus" dataset, municipalities have been ranked from highest to lowest population and it has been observed that the most crowded municipality is the Esenyurt Municipality.

```{r}
#ortalama hanehalkÄ± bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne gÃ¶re bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸe sÄ±ralama
belediye_nufus2<-belediye_nufus%>%mutate(belediye=fct_reorder(belediye, nufus_2019, .desc=TRUE))

p18<-ggplot(belediye_nufus2, aes(x=belediye, y=nufus_2019))+
  geom_bar(stat="identity")+
  theme(axis.text.x=element_text(angle=45, hjust=1))+
  xlab("Belediye AdÄ±")+
  ylab("Ortalama HanehalkÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼")+
  labs(title="Belediye BazÄ±nda 2019 YÄ±lÄ± Belediye NÃ¼fuslarÄ± BÃ¼yÃ¼klÃ¼ÄŸÃ¼")
p18
```

We can visualize the dataset titled "2019 YÄ±lÄ± Belediye NÃ¼fuslarÄ±". We can see from the graph that 2 municipalities, Esenyurt and KÃ¼Ã§Ã¼kÃ§ekmece, are over 750.000. We can also see from the graph that the first one-third of the municipalities are over 500.000. From this, we can identify the most populous municipalities that would need the most help in an earthquake disaster.

**"gerceklesen_deprem" analysis:**

Analyzing this data could be crucial for examining earthquake activity and identifying potential risks. However, predicting future earthquake magnitudes is a complex thing to do because earthquakes are random and unpredictible.

"Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremlerin BÃ¼yÃ¼klÃ¼klerinin Zaman Serisi GrafiÄŸi":

```{r}
#time sÃ¼tununu iÅŸleme
gerceklesen_deprem$time<-as.POSIXct(gerceklesen_deprem$time, format="%Y-%m-%dT%H:%M:%OSZ")

library(ggplot2)

p19<-ggplot(gerceklesen_deprem, aes(x=time, y=magnitude))+
  geom_line()+
  labs(title="Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremlerin BÃ¼yÃ¼klÃ¼klÃ¼kleri", x="Tarih", y="BÃ¼yÃ¼klÃ¼k")+
  theme_minimal()+
  scale_x_datetime(date_breaks="1 month", date_labels="%b %Y")+
  theme(axis.text.x=element_text(angle=90, vjust=0.5, hjust=1))
p19

p20<-ggplot(gerceklesen_deprem, aes(x=time, y=`depth/km`))+
  geom_line()+
  labs(title="Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremlerin Derinlikleri", x="Tarih", y="Derinlik")+
  theme_minimal()+
  scale_x_datetime(date_breaks="1 month", date_labels="%b %Y")+
  theme(axis.text.x=element_text(angle=90, vjust=0.5, hjust=1))
p20
```

What stands out in both graphs is the increase in earthquake frequencies after January 2020. This indicates that the danger is coming.

"Ä°stanbul Ã‡evresinde GerÃ§ekleÅŸen Depremlerin Harita Ãœzerinde GÃ¶sterimi":

The created map allows us to observe whre earthquakes are concentrated.

```{r}
#leaflet paketini yÃ¼kleme
#install.packages("leaflet")
library(leaflet)

#veri Ã§erÃ§evesi oluÅŸturma
depremler<-data.frame(name=gerceklesen_deprem$event_id,
                   latitude=gerceklesen_deprem$latitude,
                   longitude=gerceklesen_deprem$longitude)

#Ä°stanbul haritasÄ±nÄ± oluÅŸturma
istanbul_map<-leaflet()%>%setView(lng=28.9784, lat=41.0082, zoom=11)%>%addTiles() 

#verileri haritaya ekleme
for(i in 1:nrow(depremler)){
  istanbul_map<-addMarkers(istanbul_map, lng=depremler$longitude[i], lat=depremler$latitude[i], popup=depremler$name[i])
  }

#haritayÄ± gÃ¶rÃ¼ntÃ¼leme
istanbul_map

```

### District Based Overall Score Calculation, Sorting and Risk Analysis

A dataframe named "analiz" was constructed in order to contain the data to be used for calculating the overall risk score on a district basis. The rows represent the districts and the columns represent the factors. Each factor has a weight in order to calculate the overall risk score and the weights are located in the "weight" vector.

```{r}
#mahalle bazÄ±nda veri iÃ§eren verisetlerinde ilÃ§e bazÄ±nda olacak ÅŸekilde dÃ¼zeltmeler yapma
deprem_senaryo2<-deprem_senaryo%>%group_by(ilce_adi)%>%summarise(across(starts_with("cok_agir_hasarli_bina_sayisi"):starts_with("gecici_barinma"), sum))
bina_sayi2<-bina_sayi%>%group_by(ilce_adi)%>%summarise(across(starts_with("1980_oncesi"):starts_with("9-19 kat_arasi"), sum))

#"analiz" adlÄ± bir dataframe oluÅŸturma
analiz<-data.frame(ilce_adi=deprem_senaryo2$ilce_adi,
                   cok_agir_hasarli_bina_sayisi=deprem_senaryo2$cok_agir_hasarli_bina_sayisi,
                   agir_hasarli_bina_sayisi=deprem_senaryo2$agir_hasarli_bina_sayisi,
                   orta_hasarli_bina_sayisi=deprem_senaryo2$orta_hasarli_bina_sayisi,
                   hafif_hasarli_bina_sayisi=deprem_senaryo2$hafif_hasarli_bina_sayisi,
                   can_kaybi_sayisi=deprem_senaryo2$can_kaybi_sayisi,
                   agir_yarali_sayisi=deprem_senaryo2$agir_yarali_sayisi,
                   hastanede_tedavi_sayisi=deprem_senaryo2$hastanede_tedavi_sayisi,
                   hafif_yarali_sayisi=deprem_senaryo2$hafif_yarali_sayisi,
                   dogalgaz_boru_hasari=deprem_senaryo2$dogalgaz_boru_hasari,
                   icme_suyu_boru_hasari=deprem_senaryo2$icme_suyu_boru_hasari,
                   atik_su_boru_hasari=deprem_senaryo2$atik_su_boru_hasari,
                   gecici_barinma=deprem_senaryo2$gecici_barinma,
                   `1980_oncesi`=bina_sayi2$`1980_oncesi`,
                   `1980-2000_arasi`=bina_sayi2$`1980-2000_arasi`,
                   `2000_sonrasi`=bina_sayi2$`2000_sonrasi`,
                   `1-4 kat_arasi`=bina_sayi2$`1-4 kat_arasi`,
                   `5-9 kat_arasi`=bina_sayi2$`5-9 kat_arasi`,
                   `9-19 kat_arasi`=bina_sayi2$`9-19 kat_arasi`,
                   ortalama_hanehalki_buyuklugu=ort_hane$ortalama_hanehalki_buyuklugu)

#"weight" adlÄ± bir vektÃ¶r oluÅŸturma
weight<-c(0.09,0.07,0.05,0.03,0.09,0.07,0.05,0.03,0.05,0.05,0.05,0.05,0.08,0.05,0.03,0.03,0.05,0.08)

#overall score hesaplama
overall_risk_score<-analiz$cok_agir_hasarli_bina_sayisi*weight[1]+
  analiz$agir_hasarli_bina_sayisi*weight[2]+
  analiz$orta_hasarli_bina_sayisi*weight[3]+
  analiz$hafif_hasarli_bina_sayisi*weight[4]+
  analiz$can_kaybi_sayisi*weight[5]+
  analiz$agir_yarali_sayisi*weight[6]+
  analiz$hastanede_tedavi_sayisi*weight[7]+
  analiz$hafif_yarali_sayisi*weight[8]+
  analiz$dogalgaz_boru_hasari*weight[9]+
  analiz$icme_suyu_boru_hasari*weight[10]+
  analiz$atik_su_boru_hasari*weight[11]+
  analiz$gecici_barinma*weight[12]+
  analiz$X1980_oncesi*analiz$ortalama_hanehalki_buyuklugu*weight[13]+
  analiz$X1980.2000_arasi*analiz$ortalama_hanehalki_buyuklugu*weight[14]+
  analiz$X2000_sonrasi*analiz$ortalama_hanehalki_buyuklugu*weight[15]+
  analiz$X1.4.kat_arasi*analiz$ortalama_hanehalki_buyuklugu*weight[16]+
  analiz$X5.9.kat_arasi*analiz$ortalama_hanehalki_buyuklugu*weight[17]+
  analiz$X9.19.kat_arasi*analiz$ortalama_hanehalki_buyuklugu*weight[18]
overall_risk_score<-data.frame(ilce_adi=analiz$ilce_adi, overall_risk_score=overall_risk_score)
```

After the overall score calculation was completed, ranking was performed and the districts were ranked from highest risk to lowest risk. Finally, the overall scores were shown on the map.

```{r}
overall_risk_score<-overall_risk_score[order(overall_risk_score$overall_risk_score, decreasing=TRUE), ]
overall_risk_score

koordinatlar<-data.frame(ilce_adi=deprem_senaryo2$ilce_adi,
                         latitude=c(40.8747,41.1864,40.9833,40.9792,41.0341,40.9977,40.9804,41.0837,41.0349,41.0441,41.1271,41.0133,41.0371,41.0248,41.1421,41.0323,41.0542,41.0412,41.0551,41.0203,41.0576,41.0105,40.9903,41.0717,40.8999,41.0092,40.9339,40.8796,41.0090,41.1664,41.1749,41.0737,41.0604,40.9684,41.1070,40.8144,41.0338,41.0327,40.9910),
                         longitude=c(29.1294,28.7389,29.1278,28.7214,28.8330,28.8506,28.8724,28.8169,28.9122,29.0017,29.0978,28.6489,28.9774,28.5854,28.4575,29.1695,28.8676,28.6939,28.9346,28.9339,28.9153,28.8741,29.0205,28.9646,29.1936,28.7757,29.1650,29.2580,29.2109,29.0500,29.6096,28.2479,28.9878,29.2620,28.8714,29.3094,29.1013,29.0319,28.8968))

#en riskli ilÃ§eyi belirleme
highest_overall_risk_score<-overall_risk_score[which.max(overall_risk_score$overall_risk_score), "ilce_adi"]

risk_map<-leaflet(overall_risk_score)%>%addTiles()%>%addCircleMarkers(lng=~koordinatlar$longitude, lat=~koordinatlar$latitude, label=~paste0(koordinatlar$ilce_adi, "<br>", "Overall Skor: ", overall_risk_score), color=ifelse(koordinatlar$ilce_adi==highest_overall_risk_score, "red", "blue"))
risk_map
```

## 3.2 Results

As a result of these analyses, districts where precautions need to be taken, where the most loss of life and property could occur, and where potential interventions need to be well planned have been identified. These are Fatih, BaÄŸcÄ±lar, Pendik, KÃ¼Ã§Ã¼kÃ§ekmece and Esenyurt.

# 4. Results and Key Takeaways ğŸ“ˆ

Istanbul is Europe's most populous city. It means that the potential of destruction and the need for help would be very high if a disaster such as an earthquake occurs.

The purpose of this project is to examine the risky structural condition, to make district-based interpretations and to evaluate the opinions of people living in Istanbul.

7 datasets were used in this study, plots were drawn and interpreted comprehensively.

-   This study has determined which districts are most likely to experience possible building and infrastructure damage in an earthquake disaster. This helps determine where, how and how much aid should be directed.
-   By calculating the overall risk scores, the districts of Istanbul have been ranked from the most risky to least risky. Thanks to his ranking, the government will be able to take appropriate steps both before and after an earthquake, aiding in preparedness and response efforts.
-   Lastly, this study serves as both a guide and an encouragement for the society to be prepared for this disaster.

This study has

-   identified the regions most prone to earthquakes and the cities most at risk,

-   depicted them on maps,

-   drawn conclusions about the opinions of survey participants and

-   examined building and infrastructure in Istanbul.

\*ChatGPT was utilized.
